[["index.html", "Global Register of Introduced and Invasive Species - Belgium", " Global Register of Introduced and Invasive Species - Belgium Peter Desmet, Lien Reyserhove, Damiano Oldoni 2023-09-15 This document contains and describes all the steps in creating a unified checklist of alien species in Belgium and was developed for the Tracking Invasive Alien Species (TrIAS) project. By running this document in R, it will create all the necessary data files for the unified checklist. For more general information, see: GitHub repository Dataset on GBIF Load libraries: library(tidyverse) # To do data science library(tidylog) # To provide feedback on dplyr functions library(magrittr) # To use %&lt;&gt;% pipes library(here) # To find files library(janitor) # To clean input data library(openxlsx) # To write Excel files library(digest) # To generate hashes library(rgbif) # To use GBIF services # devtools::install_github(&quot;trias-project/trias&quot;) library(trias) # To use functions developed for TrIAS "],["1_get_taxa.html", "1 Get taxa from checklists 1.1 Choose checklists 1.2 Get taxa 1.3 Filter on distributions 1.4 Get GBIF backbone taxonomy information 1.5 Show summary and save", " 1 Get taxa from checklists In this chapter we select species checklists and retrieve the taxa they contain. 1.1 Choose checklists The unified checklist is compiled from species checklists published to GBIF under the TrIAS project. Here we choose the checklists we want to include and rank them by trust (most trustworthy first). The ranking will help to choose between duplicate taxa in later steps. Choose checklists: checklist_keys &lt;- c( &quot;9ff7d317-609b-4c08-bd86-3bc404b77c42&quot;, # alien-plants-belgium &quot;e1c3be64-2799-4342-8312-49d076993132&quot;, # alien-birds-checklist &quot;98940a79-2bf1-46e6-afd6-ba2e85a26f9f&quot;, # alien-fishes-checklist &quot;a12e2bf8-13ce-4d0b-b2d4-b1cd20450a63&quot;, # alien-herpetofauna-belgium &quot;289244ee-e1c1-49aa-b2d7-d379391ce265&quot;, # alien-macroinvertebrates &quot;e082b10e-476f-43c1-aa61-f8d92f33029a&quot;, # alien-mollusca-checklist &quot;22211949-9a6e-445f-86c0-6a0e019bc055&quot;, # alien-scheldt-checklist &quot;b043c480-dd36-4f4f-aa82-e188753ff09d&quot;, # uredinales-belgium-checklist &quot;0a2eaf0c-5504-4f48-a47f-c94229029dc8&quot;, # wrims-checklist &quot;1f3505cd-5d98-4e23-bd3b-ffe59d05d7c2&quot;, # ad-hoc-checklist &quot;1738f272-6b5d-4f43-9a92-453a8c5ea50a&quot; # rinse-pathways-checklist ) Add the GBIF Backbone Taxonomy. Note: we won’t use this as a source checklist, but we need its metadata in the Darwin Core mapping. checklist_keys &lt;- append(checklist_keys, &quot;d7dddbf4-2cf0-4f39-9b2a-bb099caae36c&quot;) Get metadata for these checklists from GBIF and display the result: Remove accessed via GBIF.org on yyyy-mm-dd. from citation (we want the static citation of the dataset). Save to CSV. Remove the GBIF Backbone Taxonomy from further querying steps. 1.2 Get taxa Get taxa from these checklists from GBIF. Note: here we get checklist taxa, not GBIF backbone taxa. Keep only source taxa, not denormed higher classification taxa (= taxa added by GBIF if kingdom, phylum, etc. was populated) Keep only taxa that are not considered synonyms by source checklist. Select columns of interest, rename key to taxonKey. Fix scientificName spelling issues (i.e. double quotes). Convert the column issues from a list to a concatenated string. Preview checklist taxa: 1.3 Filter on distributions TrIAS checklists can contain more than alien species in Belgium. We therefore need to filter on the associated distribution information. Note: we filter on distribution information of checklist taxa, not GBIF backbone taxa. That is because backbone taxa contain distribution information from TrIAS checklists and other checklists, which we don’t want to consider here. E.g. compare: Distributions for checklist taxon Eriocheir sinensis (140563012) Distributions for backbone taxon Eriocheir sinensis (2225776) Note: if a checklist has related information for a taxon, but not a valid distribution, that related information will NOT be included in the unified checklist. This is to exclude related information about a taxon for which the checklist did not even consider a Belgian scope (e.g. pathway). Get distributions for our taxa from GBIF. Filter distributions on present, alien species in Belgium: distributions &lt;- distributions %&gt;% filter( country == &quot;BE&quot;, establishmentMeans %in% c(&quot;INTRODUCED&quot;, &quot;NATURALISED&quot;, &quot;INVASIVE&quot;, &quot;ASSISTED COLONISATION&quot;), !status %in% c(&quot;ABSENT&quot;, &quot;EXCLUDED&quot;, &quot;DOUBTFUL&quot;) # Inverse filter! ) Save distributions to CSV. Based on the filtered distributions, assign a validDistribution (TRUE/FALSE) column to the taxa. Preview some taxa with not a single valid distribution (taxonKey can be used to verify manually on GBIF): Rename nubKey to bb_key and move to the end. 1.4 Get GBIF backbone taxonomy information A taxon can occur on more than one checklist. To identify these duplicates, we cannot rely on the scientific name as there might be spelling variations (e.g. with or without authorship) and it does not account for synonyms that should be lumped with the accepted taxon. To have unifying taxon identifiers across taxa, we rely on the GBIF backbone taxonomy, to which every checklist taxon (re)published to GBIF is automatically matched. If a match in the backbone is found, the checklist taxon will have a nubKey. Filter taxa on having valid distribution and nubKey (bb_key) and create vector of unique nubKeys. Get GBIF backbone taxonomy information. Rename accepted to acceptedName. Add prefix bb_ to column names. Select columns of interest. Join backbone information with checklist taxa. Note: this can attach information to taxa with validDistribution = FALSE that share a bb_key with other taxa. Preview merged information: 1.5 Show summary and save Show summary per checklist: Save to two CSVs: data/raw/taxa.csv: all checklist taxa data/interim/taxa_with_verification.csv: subset of checklist taxa with a valid distribution and an empty column verificationKey. This file will be used in later steps. "],["2_get_information.html", "2 Get related information 2.1 Read taxa 2.2 Get distributions 2.3 Get species profiles 2.4 Get descriptions", " 2 Get related information In this chapter we retrieve related information for taxa on the checklists (with a valid distribution). 2.1 Read taxa Read taxa from data/interim/taxa_with_verification.csv. Extract taxonKeys as a vector. 2.2 Get distributions This was already done in 1.3, where only distributions of interest were kept. 2.3 Get species profiles Get species profiles for our taxa from GBIF. Save to CSV. 2.4 Get descriptions Get descriptions for our taxa from GBIF. Save to CSV. "],["3_verify_taxa.html", "3 Verify taxa 3.1 Read taxa 3.2 Read verification information 3.3 Run and save verification 3.4 Show verification status", " 3 Verify taxa In this chapter we verify taxonomic information returned by the GBIF Backbone Taxonomy. We do this because we want to use the backbone information to unify taxa that can be considered the same within or across checklists. This is straightforward for (accepted) taxa with the same backbone key (bb_key), but requires verification for taxa the backbone does not recognize (no backbone match) or will lump under another name (synonyms). See 3.2. 3.1 Read taxa Read taxa from data/interim/taxa_with_verification.csv. 3.2 Read verification information Verification information consists of a manually assigned verificationKey for taxa the backbone does not recognize (no backbone match) or will lump under another name (synonyms). Those checklist/backbone/accepted taxon combinations are stored in references/verification.tsv, which was created/updated in previous runs of this chapter and then manually annoted with a verificationKey. 3.3 Run and save verification Use the existing verification information to verify taxa with the function trias::verify_taxa: verification &lt;- trias::verify_taxa(taxa, verification) Note: to start a verification from scratch, use trias::verify_taxa(taxa). Save taxa with populated verificationKey back to data/interim/taxa_with_verification.csv. Save updated verification back to references/verification.tsv (sorted on scientificName) 3.4 Show verification status 3.4.1 Unmatched taxa Status Number of taxa Verified 5 Unverified 86 New in this run 2 No longer used 23 Unmatched taxa are those for which the automatic backbone matching on the scientific name failed (have BACKBONE_MATCH_NONE in issues), either because the scientific name could not be parsed or because it is not listed in the backbone. Verification (see 3.2) involves setting the verificationKey to a manually found bb_key. One could even set multiple bb_keys, e.g. to split a hybrid formula into its hybrid parents. 3.4.2 Synonyms Status Number of taxa Previously verified 174 Unverified 330 New in this run 171 No longer used 268 Synonyms are taxa that the backbone will lump under an accepted taxon (taxonomicStatus = SYNONYM or similar). This lumping is often correct, but should be verified. Verification (see 3.2) involves setting the verifiedKey to one of the following: accepted bb_key suggested by GBIF: backbone synonymy is accepted and taxon will be lumped. another accepted bb_key: backbone synonymy is rejected, but taxon will be lumped under another name. bb_key of taxon itself: backbone synonymy is rejected, taxon will be considered as separate taxon. 3.4.3 Accepted taxa Status Number of taxa Verified (automatic) 3145 Unverified 0 Accepted taxa are those the backbone considers own entities (taxonomicStatus = ACCEPTED or DOUBTFUL) that won’t be lumped. No verification is required for these: verificationKey is automatically set to their bb_key. 3.4.4 Erroneous verificationKeys Provided verification keys that are not found in the GBIF backbone: 3.4.5 Additional information Additional information regarding the verification information that is of no further consequence. Duplicate taxa (having same bb_key and bb_acceptedKey) that are quick wins to verify: Previously listed synonyms for which the scientific name was updated in the backbone: Previously listed synonyms for which the accepted scientific name was updated in the backbone: "],["4_unify_taxa.html", "4 Unify taxa 4.1 Read taxa 4.2 Unify taxa 4.3 Get GBIF backbone taxonomy information 4.4 Explicitely remove incorrect taxa", " 4 Unify taxa In this chapter we unify taxa on their verificationKey. 4.1 Read taxa Read taxa from data/interim/taxa_with_verification.csv. 4.2 Unify taxa Remove taxa without verificationKey. Separate multiple verificationKeys (if any) for single taxa. Group taxa by verificationKey, saving the datasetKey and taxonKey of the taxa that are bundled per key in datasetKeys and taxonKeys. Extract verificationKey as a vector. Number of unique taxa: 3015 4.3 Get GBIF backbone taxonomy information Even though we stored some backbone information for most of our taxa in the previous steps, we want to start from scratch here and retrieve it from GBIF again, as 1) some taxon keys in verificationKeys will be new and 2) we want to store more attributes per taxon this time. Get GBIF backbone taxonomy information. Rename accepted to acceptedName. Select columns of interest. Join backbone information with our unified taxa, so we keep datasetKeys and taxonKeys. Move columns datasetKeys and taxonKeys to the end. Preview merged information: Number of taxa: 3015 4.4 Explicitely remove incorrect taxa Some taxa are purposely excluded in a source checklist (e.g. see this issue for Alien birds), but still end up in the unified checklist because they are incorrectly included in another no-longer-updated source checklist (e.g. RINSE pathways). Here we explicitely remove those taxa: ntaxa &lt;- nrow(taxa_unified) taxa_unified &lt;- taxa_unified %&gt;% filter( scientificName != &quot;Anser fabalis (Latham, 1787)&quot;, scientificName != &quot;Anser anser (Linnaeus, 1758)&quot;, scientificName != &quot;Branta leucopsis (Bechstein, 1803)&quot; ) Number of removed taxa: 3 Total number of taxa: 3012 Save to CSV. "],["5_unify_information.html", "5 Unify related information 5.1 Read data 5.2 Assign checklist order 5.3 Unify distribution 5.4 Unify species profiles 5.5 Unify descriptions", " 5 Unify related information In this chapter we unify related information for each verified taxon. 5.1 Read data # Read checklists checklists &lt;- read_csv(here(&quot;data&quot;, &quot;raw&quot;, &quot;checklists.csv&quot;)) # Read data taxa &lt;- read_csv(here(&quot;data&quot;, &quot;interim&quot;, &quot;taxa_with_verification.csv&quot;)) distributions &lt;- read_csv( here(&quot;data&quot;, &quot;raw&quot;, &quot;distributions.csv&quot;), col_types = cols( .default = col_character(), taxonKey = col_double() ) ) speciesprofiles &lt;- read_csv(here(&quot;data&quot;, &quot;raw&quot;, &quot;speciesprofiles.csv&quot;)) descriptions &lt;- read_csv( here(&quot;data&quot;, &quot;raw&quot;, &quot;descriptions.csv&quot;), col_types = cols( .default = col_character(), key = col_double(), taxonKey = col_double() ) ) 5.2 Assign checklist order Get checklist keys as (ordered) vector. Assign the checklist order (= index of checklist keys) as an extra column to taxa. 5.3 Unify distribution Parse temporal (eventDate) information. distributions_unified &lt;- distributions %&gt;% # Split temporal on &quot;/&quot; into startYear and endYear # If temporal only contains a single year, then endYear will be empty separate( temporal, into = c(&quot;startYear&quot;, &quot;endYear&quot;), sep = &quot;/&quot;, remove = FALSE, convert = TRUE, extra = &quot;drop&quot;, fill = &quot;right&quot; ) %&gt;% # Only keep the first 4 characters: 1968-11-21 -&gt; 1968 mutate( startYear = as.integer(str_sub(startYear, 1, 4)), endYear = as.integer(str_sub(endYear, 1, 4)) ) %&gt;% # If endYear is empty (no range), populate it with startYear: 2018 &amp; 2018 mutate(endYear = if_else(is.na(endYear), startYear, endYear)) Filter distributions: this was already done in 1.3, where only distributions of interest were kept. Convert specific localities (from WRIMS) to regional or national localities: distributions_unified &lt;- distributions_unified %&gt;% mutate(locality = recode(locality, &quot;Belgian part of the North Sea&quot; = &quot;Belgium&quot;, &quot;Belgian Exclusive Economic Zone&quot; = &quot;Belgium&quot;, &quot;Baai van Heist&quot; = &quot;Flemish Region&quot;, &quot;Belgian Coast&quot; = &quot;Flemish Region&quot;, &quot;Blankenberge Harbour&quot; = &quot;Flemish Region&quot;, &quot;Bredene&quot; = &quot;Flemish Region&quot;, &quot;Coastal Polders&quot; = &quot;Flemish Region&quot;, &quot;De Panne&quot; = &quot;Flemish Region&quot;, &quot;Haven van Antwerpen&quot; = &quot;Flemish Region&quot;, &quot;Kanaal Gent - Terneuzen&quot; = &quot;Flemish Region&quot;, &quot;Knokke-Heist&quot; = &quot;Flemish Region&quot;, &quot;Koksijde&quot; = &quot;Flemish Region&quot;, &quot;Nieuwpoort Harbour&quot; = &quot;Flemish Region&quot;, &quot;Oostende&quot; = &quot;Flemish Region&quot;, &quot;Oostende&quot; = &quot;Flemish Region&quot;, &quot;Oostende Harbour&quot; = &quot;Flemish Region&quot;, &quot;port of Bruges-Zeebrugge&quot; = &quot;Flemish Region&quot;, &quot;Port of Ghent&quot; = &quot;Flemish Region&quot;, &quot;Spuikom&quot; = &quot;Flemish Region&quot;, &quot;Zeebrugge&quot; = &quot;Flemish Region&quot;, &quot;Flanders&quot; = &quot;Flemish Region&quot;, &quot;Wallonia&quot; = &quot;Walloon Region&quot; )) %&gt;% # Standardize locationId for all mutate(locationId = case_when( locality == &quot;Belgium&quot; ~ &quot;ISO_3166:BE&quot;, locality == &quot;Brussels-Capital Region&quot; ~ &quot;ISO_3166:BE-BRU&quot;, locality == &quot;Flemish Region&quot; ~ &quot;ISO_3166:BE-VLG&quot;, locality == &quot;Walloon Region&quot; ~ &quot;ISO_3166:BE-WAL&quot;, TRUE ~ NA_character_ )) Add a Belgian distribution from regional distributions within a checklist if not present. distributions_belgium_from_regions &lt;- distributions_unified %&gt;% # Group by taxonKey within a checklist group_by(taxonKey) %&gt;% # Filter on those groups without a national distribution filter(!&quot;Belgium&quot; %in% locality) %&gt;% # Take earliest and latest year from regional distributions # Don&#39;t copy source and remarks summarize( startYear = min(startYear, na.rm = TRUE), endYear = max(endYear, na.rm = TRUE) ) %&gt;% ungroup() %&gt;% # Convert dates to integers and set Inf to NA mutate( startYear = ifelse(!is.infinite(startYear), as.integer(startYear), NA_integer_), endYear = ifelse(!is.infinite(endYear), as.integer(endYear), NA_integer_) ) %&gt;% # Add locality and locationId mutate( locality = &quot;Belgium&quot;, locationId = &quot;ISO_3166:BE&quot; ) %&gt;% # Order columns select(one_of(names(distributions_unified))) # Add newly created Belgian distributions to distributions distributions_unified &lt;- distributions_unified %&gt;% bind_rows(distributions_belgium_from_regions) %&gt;% # Sort by taxonKey arrange(taxonKey) Choose a single distribution per locality within a checklist. Note: In contrast to the other extensions, the distribution information can come from multiple taxa within the same checklist. For example: scientific name eventDate https://www.gbif.org/species/141266662/verbatim 1885/1901 Medicago monantha subsp. noeana (Boiss.) Greuter &amp; Burdet 1886/1955 Both are considered (verified) synonyms of Medicago monantha Trautv., so their distribution information is merged to 1885/1955. We note both in taxonKeys and scientificNames. distributions_unified &lt;- distributions_unified %&gt;% # Join distribution with taxon to get verificationKey and checklistOrder left_join(taxa, by = &quot;taxonKey&quot;) %&gt;% # Remove records that have no verificationKey (e.g. one wasn&#39;t assigned yet) filter(!is.na(verificationKey)) %&gt;% # Group by verificationKey and locality within a checklist group_by( datasetKey, checklistOrder, verificationKey, locality, locationId ) %&gt;% # Take earliest year, latest year and note taxonKey(s) and scientificName(s) summarize( startYear = min(startYear, na.rm = TRUE), endYear = max(endYear, na.rm = TRUE), taxonKeys = paste(unique(taxonKey), collapse = &quot;|&quot;), scientificNames = paste(unique(scientificName), collapse = &quot;|&quot;) ) %&gt;% ungroup() %&gt;% # Convert dates to integers and set Inf to NA mutate( startYear = ifelse(!is.infinite(startYear), as.integer(startYear), NA_integer_), endYear = ifelse(!is.infinite(endYear), as.integer(endYear), NA_integer_) ) Choose a single distribution per locality across checklists. distributions_unified &lt;- distributions_unified %&gt;% # Sort by checklist order (trustworthiness) arrange(checklistOrder) %&gt;% # Group by verificationKey and locality across checklists group_by( verificationKey, locality, locationId ) %&gt;% # Select year of most trustworthy checklist (first one) # and note that checklist and its taxonKey(s) and scientificName(s) summarize( startYear = first(startYear), endYear = first(endYear), datasetKey = first(datasetKey), taxonKeys = first(taxonKeys), scientificNames = first(scientificNames) ) %&gt;% ungroup() %&gt;% # Sort by verificationKey arrange(verificationKey) Save to CSV. 5.4 Unify species profiles Filter species profiles. speciesprofiles_unified &lt;- speciesprofiles %&gt;% # Remove species profiles that contain NA for any of the attributes # This is rare: normally all attributes are populated or there just isn&#39;t a # species profile for that species filter( !is.na(marine) &amp; !is.na(freshwater) &amp; !is.na(terrestrial) ) Choose a single species profile within a checklist. speciesprofiles_unified &lt;- speciesprofiles_unified %&gt;% # Join species profile with taxon to get verificationKey and checklist order left_join(taxa, by = &quot;taxonKey&quot;) %&gt;% # Remove records that have no verificationKey (e.g. one wasn&#39;t assigned yet) filter(!is.na(verificationKey)) %&gt;% # Group by verificationKey within checklist group_by( datasetKey, checklistOrder, verificationKey ) %&gt;% # Take first species profile and note taxonKey summarize( marine = first(marine), freshwater = first(freshwater), terrestrial = first(terrestrial), taxonKey = first(taxonKey), scientificName = first(scientificName) ) Choose a single species profile across checklists. speciesprofiles_unified &lt;- speciesprofiles_unified %&gt;% # Sort by checklist order (trustworthiness) arrange(checklistOrder) %&gt;% # Group by verificationKey across checklists group_by(verificationKey) %&gt;% # Select species profile of most trustworthy checklist (first one) # and note that checklist and its taxonKey summarize( marine = first(marine), freshwater = first(freshwater), terrestrial = first(terrestrial), datasetKey = first(datasetKey), taxonKey = first(taxonKey), scientificName = first(scientificName) ) %&gt;% # Sort by verificationKey arrange(verificationKey) Save to CSV. 5.5 Unify descriptions 5.5.1 Native range Retrieve native range. Standardize native range: native_range &lt;- native_range %&gt;% mutate(description = recode(description, &quot;Africa&quot; = &quot;Africa&quot;, &quot;Africa (WGSRPD:2)&quot; = &quot;Africa&quot;, &quot;Algeria&quot; = &quot;Northern Africa&quot;, &quot;America&quot; = &quot;Americas&quot;, &quot;Arctic&quot; = &quot;&quot;, &quot;Asia&quot; = &quot;Asia&quot;, &quot;Asia And Pacific Islands&quot; = &quot;Asia | Asia | Micronesia | Polynesia&quot;, &quot;Australasia (WGSRPD:5)&quot; = &quot;Australia and New Zealand&quot;, &quot;Australia&quot; = &quot;Australia and New Zealand&quot;, &quot;Australia (WGSRPD:50)&quot; = &quot;Australia and New Zealand&quot;, &quot;Austria&quot; = &quot;Western Europe&quot;, &quot;Balearic Islands&quot; = &quot;Southern Europe&quot;, &quot;Balkan&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;Bolivia, Chile, Argentina&quot; = &quot;South America&quot;, &quot;Brazil, Uruguay, Paraguay, Argentina&quot; = &quot;South America&quot;, &quot;Canada To Peru, Caribbean&quot; = &quot;Americas&quot;, &quot;Canary Is. To Turkey&quot; = &quot;Northern Africa | Northern Africa&quot;, &quot;Canary Islands (WGSRPD:21_CNY)&quot; = &quot;Northern Africa&quot;, &quot;Cape Verde Is., Africa, Madagascar, Comoros&quot; = &quot;Africa&quot;, &quot;Caribbean (WGSRPD:81)&quot; = &quot;Caribbean&quot;, &quot;Caribbean To Brazil&quot; = &quot;Caribbean | Caribbean&quot;, &quot;Carpathians&quot; = &quot;Eastern Europe&quot;, &quot;Caucasus region&quot; = &quot;Western Asia&quot;, &quot;Central America (WGSRPD:80)&quot; = &quot;Central America&quot;, &quot;Central And South America&quot; = &quot;Central America | Central America&quot;, &quot;Central Asia&quot; = &quot;Central Asia&quot;, &quot;central Europe&quot; = &quot;Western Europe | Western Europe | Eastern Europe&quot;, &quot;central Italy&quot; = &quot;Southern Europe&quot;, &quot;central Mediterranean coastal areas&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;central Turkey&quot; = &quot;Western Asia&quot;, &quot;Central, South America&quot; = &quot;Central America | Central America&quot;, &quot;China&quot; = &quot;Eastern Asia&quot;, &quot;China (WGSRPD:36)&quot; = &quot;Eastern Asia&quot;, &quot;circum western Mediterranean coastal areas&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;circum-Mediterranean&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;coastal areas of the western Balkan&quot; = &quot;Southern Europe&quot;, &quot;Corsica&quot; = &quot;Southern Europe&quot;, &quot;Cosmopolitan&quot; = &quot;&quot;, &quot;Costa Rica (WGSRPD:80_COS)&quot; = &quot;Central America&quot;, &quot;Costa Rica, Panama&quot; = &quot;Central America&quot;, &quot;Crete&quot; = &quot;Southern Europe&quot;, &quot;cultivated origin&quot; = &quot;&quot;, &quot;Cyprus, Turkey, Middle East, Egypt, Sudan&quot; = &quot;Western Asia | Western Asia&quot;, &quot;East Asia&quot; = &quot;Eastern Asia&quot;, &quot;eastern Africa&quot; = &quot;Eastern Africa&quot;, &quot;Eastern Africa&quot; = &quot;Eastern Africa&quot;, &quot;Eastern Asia (WGSRPD:38)&quot; = &quot;Eastern Asia&quot;, &quot;Eastern Asian Russia&quot; = &quot;Eastern Asia | Eastern Asia&quot;, &quot;Eastern Europe&quot; = &quot;Eastern Europe&quot;, &quot;Eastern Europe (WGSRPD:14)&quot; = &quot;Eastern Europe&quot;, &quot;Eastern North America&quot; = &quot;Northern America&quot;, &quot;Eastern Palearctic Including China, Korea, Japan&quot; = &quot;Eastern Asia&quot;, &quot;Egypt, Ethiopia, Kenya, Uganda, Rwanda&quot; = &quot;Northern Africa | Northern Africa&quot;, &quot;Ethiopia&quot; = &quot;Northern Africa&quot;, &quot;Eurasia&quot; = &quot;Europe | Europe&quot;, &quot;Eurasia Africa&quot; = &quot;Europe | Europe | Africa&quot;, &quot;Europe (WGSRPD:1)&quot; = &quot;Europe&quot;, &quot;Europe To Azerbaijan, Egypt&quot; = &quot;Europe | Europe | Northern Africa&quot;, &quot;Europe To Northern Africa&quot; = &quot;Europe | Europe&quot;, &quot;Europe, Africa, Yemen, Pakistan, Philippines&quot; = &quot;Europe | Europe | Asia&quot;, &quot;Europe, North Africa To Near East, Turkey, Caucasus, Russia To Central Asia, Iran, Afghanistan, China, Mongolia, Korea&quot; = &quot;Europe | Europe | Western Asia&quot;, &quot;Galapagos (WGSRPD:GAL)&quot; = &quot;South America&quot;, &quot;Greece&quot; = &quot;Southern Europe&quot;, &quot;Hawaiian Islands (WGSRPD:HI)&quot; = &quot;Northern America&quot;, &quot;hybrid origin&quot; = &quot;&quot;, &quot;Iberia&quot; = &quot;Southern Europe&quot;, &quot;Iberian Peninsula&quot; = &quot;Southern Europe&quot;, &quot;India, Southeast Asia To Australia, New Zealand&quot; = &quot;Southern Asia | Southern Asia | Australia and New Zealand&quot;, &quot;Indian Subcontinent (WGSRPD:40)&quot; = &quot;Southern Asia&quot;, &quot;Indo-Pacific&quot; = &quot;Africa | Africa | Australia and New Zealand&quot;, &quot;Indonesia (WGSRPD:ID)&quot; = &quot;Southeastern Asia&quot;, &quot;Italian Peninsula&quot; = &quot;Southern Europe&quot;, &quot;Italy&quot; = &quot;Southern Europe&quot;, &quot;Japan (WGSRPD:38_JAP)&quot; = &quot;Eastern Asia&quot;, &quot;Japan (WGSRPD:JAP)&quot; = &quot;Eastern Asia&quot;, &quot;Macaronesia&quot; = &quot;Northern Africa&quot;, &quot;Macaronesia, Europe, North Africa To Turkey, Caucasus, Turkmenistan, Iran&quot; = &quot;Northern Africa | Northern Africa | Western Asia&quot;, &quot;Macaronesia, North Africa, Europe, Turkey, Caucasus, Near East, Kazakhstan&quot; = &quot;Northern Africa | Northern Africa | Western Asia&quot;, &quot;Madagascar (WGSRPD:MDG)&quot; = &quot;Eastern Africa&quot;, &quot;Mallorca&quot; = &quot;Southern Europe&quot;, &quot;Mediterranean&quot; = &quot;Southern Europe&quot;, &quot;Mediterranean &amp; Portugal&quot; = &quot;Southern Europe&quot;, &quot;Mediterranean To Central Asia&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;Mediterranean To Russia&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;Mediterranean To Turkey, Israel&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;Mediterranean, Africa, India, Myanmar, China&quot; = &quot;Southern Europe | Southern Europe | Asia&quot;, &quot;Mediterranean, Northern Africa&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;Middle Africa&quot; = &quot;Middle Africa&quot;, &quot;Middle East&quot; = &quot;Western Asia&quot;, &quot;Morocco&quot; = &quot;Northern Africa&quot;, &quot;Nam&quot; = &quot;Northern America&quot;, &quot;Near East&quot; = &quot;Western Asia&quot;, &quot;Nearctic&quot; = &quot;&quot;, &quot;Neotropic&quot; = &quot;&quot;, &quot;New Zealand&quot; = &quot;Australia and New Zealand&quot;, &quot;New Zealand (WGSRPD:51)&quot; = &quot;Australia and New Zealand&quot;, &quot;North Africa&quot; = &quot;Northern Africa&quot;, &quot;North America&quot; = &quot;Northern America&quot;, &quot;North America, Europe, North Africa, Turkey, Israel, Caucasus, Russia (European To Far East), Central Asia, China, Korea&quot; = &quot;Northern America | Northern America | Asia | North Africa&quot;, &quot;North Pacific Ocean&quot; = &quot;&quot;, &quot;North, Central And South America&quot; = &quot;Americas&quot;, &quot;Northeast Asia&quot; = &quot;Eastern Asia&quot;, &quot;Northern Africa&quot; = &quot;Northern Africa&quot;, &quot;Northern Africa And Middle East&quot; = &quot;Northern Africa | Northern Africa&quot;, &quot;Northern Africa, Southern Europe To Turkey&quot; = &quot;Northern Africa | Northern Africa | Western Asia&quot;, &quot;Northern America&quot; = &quot;Northern America&quot;, &quot;Northern America (WGSRPD:7)&quot; = &quot;Northern America&quot;, &quot;northern Balkan&quot; = &quot;Eastern Europe&quot;, &quot;northern coastal areas of the western Mediterranean&quot; = &quot;Southern Europe&quot;, &quot;northern Italy&quot; = &quot;Southern Europe&quot;, &quot;northern part of the Iberian Peninsula&quot; = &quot;Southern Europe&quot;, &quot;northwestern Croatia&quot; = &quot;Southern Europe&quot;, &quot;northwestern Italy&quot; = &quot;Southern Europe&quot;, &quot;nortwestern Africa&quot; = &quot;Northern Africa&quot;, &quot;Palearctic&quot; = &quot;&quot;, &quot;pan-American&quot; = &quot;Americas&quot;, &quot;Panama (WGSRPD:PAN)&quot; = &quot;Central America&quot;, &quot;Pantropical&quot; = &quot;&quot;, &quot;Papua New Guinea&quot; = &quot;Melanesia&quot;, &quot;Philippines (WGSRPD:PHI)&quot; = &quot;Southeastern Asia&quot;, &quot;Ponto-Caspian&quot; = &quot;Eastern Europe&quot;, &quot;Portugal (WGSRPD:POR)&quot; = &quot;Southern Europe&quot;, &quot;Probably Native To North America Only&quot; = &quot;Northern America&quot;, &quot;Russia&quot; = &quot;Eastern Europe&quot;, &quot;Sardinia&quot; = &quot;Southern Europe&quot;, &quot;Sicily&quot; = &quot;Southern Europe&quot;, &quot;Slovenia&quot; = &quot;Eastern Europe&quot;, &quot;South America&quot; = &quot;South America&quot;, &quot;Southeast Asia&quot; = &quot;Southeastern Asia&quot;, &quot;southeastern Alps&quot; = &quot;Southern Europe&quot;, &quot;Southeastern Asia&quot; = &quot;Southeastern Asia&quot;, &quot;southeastern Europe&quot; = &quot;Southern Europe&quot;, &quot;Southeastern Europe (WGSRPD:13)&quot; = &quot;Southern Europe&quot;, &quot;southeastern France&quot; = &quot;Western Europe&quot;, &quot;Southern Africa&quot; = &quot;Southern Africa&quot;, &quot;Southern Africa (WGSRPD:27)&quot; = &quot;Southern Africa&quot;, &quot;southern Alps&quot; = &quot;Southern Europe&quot;, &quot;Southern America (WGSRPD:8)&quot; = &quot;South America&quot;, &quot;Southern Asia&quot; = &quot;Southern Asia&quot;, &quot;southern Europe&quot; = &quot;Southern Europe&quot;, &quot;Southern Europe&quot; = &quot;Southern Europe&quot;, &quot;Southern Europe, Africa, Turkey, Caucasus, Near East, Iran&quot; = &quot;Southern Europe | Southern Europe | Western Asia&quot;, &quot;southern France&quot; = &quot;Western Europe&quot;, &quot;Southern Hemisphere&quot; = &quot;&quot;, &quot;Southwestern Africa&quot; = &quot;Southern Africa&quot;, &quot;southwestern France&quot; = &quot;Western Europe&quot;, &quot;southwestern Germany&quot; = &quot;Western Europe&quot;, &quot;Spain&quot; = &quot;Southern Europe&quot;, &quot;Spain (WGSRPD:SPA)&quot; = &quot;Southern Europe&quot;, &quot;Spain, Italy, North Africa&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;Sub-Saharan Africa&quot; = &quot;Western Africa | Western Africa | Eastern Africa | Southern Africa&quot;, &quot;Switzerland&quot; = &quot;Western Europe&quot;, &quot;Tanzania (WGSRPD:TAN)&quot; = &quot;Eastern Africa&quot;, &quot;Tasmania (WGSRPD:50_TAS)&quot; = &quot;Australia and New Zealand&quot;, &quot;Temperate Asia&quot; = &quot;Eastern Asia | Eastern Asia | Eastern Europe | Western Asia&quot;, &quot;temperate Asia (WGSRPD:3)&quot; = &quot;Eastern Asia | Eastern Asia | Eastern Europe | Western Asia&quot;, &quot;Tropical Africa&quot; = &quot;&quot;, &quot;Tropical and warm seas&quot; = &quot;&quot;, &quot;Tropical Asia&quot; = &quot;Southern Asia | Southern Asia&quot;, &quot;tropical Asia (WGSRPD:4)&quot; = &quot;Southern Asia | Southern Asia&quot;, &quot;tropical western Africa&quot; = &quot;Western Africa&quot;, &quot;Tunisia&quot; = &quot;Northern Africa&quot;, &quot;unclear&quot; = &quot;&quot;, &quot;United States&quot; = &quot;Northern America&quot;, &quot;Usa To Guatemala&quot; = &quot;Northern America | Northern America&quot;, &quot;West Africa&quot; = &quot;Western Africa&quot;, &quot;Western Africa&quot; = &quot;Western Africa&quot;, &quot;Western Asia (WGSRPD:34)&quot; = &quot;Western Asia&quot;, &quot;Western Atlantic&quot; = &quot;&quot;, &quot;western Balkan&quot; = &quot;Southern Europe&quot;, &quot;western circum-Mediterranean&quot; = &quot;Southern Europe | Southern Europe&quot;, &quot;western Italy&quot; = &quot;Southern Europe&quot;, &quot;western Mediterranean&quot; = &quot;Southern Europe&quot;, &quot;western Mediterranean coastal areas&quot; = &quot;Southern Europe&quot;, &quot;western Mediterranean region&quot; = &quot;Southern Europe&quot;, .default = &quot;&quot; # Change to description to discover new values )) 5.5.2 Degree of establishment Rename invasion stage to degree of establishment, so the values can be combined. 5.5.3 Combine and process descriptions Combine descriptions. Split and gather descriptions on |. Remove NA and empty descriptions. Select unique descriptions (within their type) within a checklist. descriptions_unified &lt;- descriptions_unified %&gt;% # Join species profile with taxon to get verificationKey and checklist order left_join(taxa, by = &quot;taxonKey&quot;) %&gt;% # Remove records that have no verificationKey (e.g. one wasn&#39;t assigned yet) filter(!is.na(verificationKey)) %&gt;% # Group by type and verificationKey within checklist group_by( datasetKey, checklistOrder, verificationKey, type, description ) %&gt;% # Take first taxonKey and scientificName summarize( taxonKey = first(taxonKey), scientificName = first(scientificName) ) Select unique descriptions (within their type) across checklists: descriptions_unified &lt;- descriptions_unified %&gt;% # Sort by checklist order (trustworthiness) arrange(checklistOrder) %&gt;% # Group by type and verificationKey across checklists group_by( type, description, verificationKey ) %&gt;% # Select first datasetKey, taxonKey and scientificName summarize( datasetKey = first(datasetKey), taxonKey = first(taxonKey), scientificName = first(scientificName) ) %&gt;% # Move verificationKey to beginning and drop checklist_order select(verificationKey, everything()) %&gt;% # Sort by verificationKey and type arrange(verificationKey, type) Save to CSV. "],["6_dwc_mapping.html", "6 Darwin Core mapping 6.1 Read unified data 6.2 Preview data 6.3 How we cite our sources 6.4 Taxon core 6.5 Distribution extension 6.6 Species profile extension 6.7 Description extension", " 6 Darwin Core mapping In this chapter we standardize the unified information to a Darwin Core checklist that can be harvested by GBIF. 6.1 Read unified data checklists &lt;- read_csv(here(&quot;data&quot;, &quot;raw&quot;, &quot;checklists.csv&quot;)) input_taxa &lt;- read_csv(here(&quot;data&quot;, &quot;interim&quot;, &quot;taxa_unified.csv&quot;)) input_distributions &lt;- read_csv( here(&quot;data&quot;, &quot;interim&quot;, &quot;distributions_unified.csv&quot;), na = &quot;&quot;, col_types = cols( .default = col_character(), verificationKey = col_double(), startYear = col_double(), endYear = col_double() ) ) input_speciesprofiles &lt;- read_csv( here(&quot;data&quot;, &quot;interim&quot;, &quot;speciesprofiles_unified.csv&quot;) ) input_descriptions &lt;- read_csv(here(&quot;data&quot;, &quot;interim&quot;, &quot;descriptions_unified.csv&quot;)) 6.2 Preview data Number of rows per file and corresponding mapping section in this chapter: File Number of rows taxa 3012 distributions 7348 speciesprofiles 2962 descriptions 12163 Number of taxa per checklist: Number of taxa per kingdom: Number of taxa per rank: Number of taxa and descriptions per type: 6.3 How we cite our sources Each row of information in the Taxon core and the extensions is based on a specific source: File Source Field for citation Mapping section Taxon core a taxon in the GBIF Backbone Taxonomy bibliographicCitation 6.4 Distribution extension one or more taxa in a source checklist source 6.5 Species profile extension a taxon in a source checklist source 6.6 Description extension a taxon in a source checklist source 6.7 To reference this source, we will use the GBIF citation format for species pages, prefixed with the URL of that page. E.g. for the distribution of Nymphea marliacea Marliac this would be: https://www.gbif.org/species/141264581: Nymphaea marliacea Marliac in Verloove F, Groom Q, Brosens D, Desmet P, Reyserhove L (2018). Manual of the Alien Plants of Belgium. Version 1.7. Botanic Garden Meise. Checklist dataset https://doi.org/10.15468/wtda1m. This information is a combination of: taxonKey: e.g. 1412645812 (contained in distributions.csv), scientificName: e.g. Nymphaea marliacea Marliac (contained in distributions.csv), citation: e.g. Verloove F, Groom Q, Brosens D, Desmet P, Reyserhove L (2018). Manual of the Alien Plants of Belgium. Version 1.7. Botanic Garden Meise. Checklist dataset https://doi.org/10.15468/wtda1m. (contained in checklists.csv) To generate this full citation, we create a helper function add_source_citation(df, new_column, dataset_info). 6.4 Taxon core 6.4.1 Pre-processing Create a dataframe taxon from the unified taxa. Separate canonicalName in canonicalName_genus, canonicalName_species and canonicalName_infraspecific (on whitespace). 6.4.2 Term mapping Map the data to Darwin Core Taxon. 6.4.2.1 language taxon %&lt;&gt;% mutate(dwc_language = &quot;en&quot;) 6.4.2.2 license The license under which (each record of) the unified checklist will be published should be the most restrictive license of the source checklists. The potential licenses are the three Creative Commons licenses supported by GBIF (ordered from least to most restrictive): The actual licenses of the source checklists and the GBIF Backbone Taxonomy (which we use for the taxon core) are: Based on the above ranking, the most restrictive license is: ## [1] &quot;http://creativecommons.org/licenses/by/4.0/legalcode&quot; Which we use for our license: taxon %&lt;&gt;% mutate(dwc_license = most_restrictive_license) 6.4.2.3 rightsHolder We do not set rightsHolder as the taxon and its related information is based on different source checklists (which in turn are based on other sources), published by different organizations, and mostly released under CC0. Instead, we make an effort to cite the sources (see 6.3). taxon %&lt;&gt;% mutate(dwc_rightsHolder = NA) 6.4.2.4 bibliographicCitation See 6.3: # Add temporary field with datasetKey of GBIF Backbone Taxonomy # taxon %&lt;&gt;% mutate(datasetKey = &quot;d7dddbf4-2cf0-4f39-9b2a-bb099caae36c&quot;) taxon %&lt;&gt;% add_source_citation( new_column = &quot;dwc_bibliographicCitation&quot;, dataset_info = checklists, taxon_key = &quot;verificationKey&quot; ) 6.4.2.5 datasetID taxon %&lt;&gt;% mutate(dwc_datasetID = &quot;https://doi.org/10.15468/xoidmd&quot;) 6.4.2.6 institutionCode taxon %&lt;&gt;% mutate(dwc_institutionCode = &quot;ISSG&quot;) # Invasive Species Specialist Group ISSG 6.4.2.7 datasetName taxon %&lt;&gt;% mutate(dwc_datasetName = &quot;Global Register of Introduced and Invasive Species - Belgium&quot;) 6.4.2.8 references URL of the GBIF Backbone Taxonomy taxon on gbif.org: taxon %&lt;&gt;% mutate(dwc_references = paste0(&quot;https://www.gbif.org/species/&quot;, verificationKey)) 6.4.2.9 taxonID URL of the GBIF Backbone Taxonomy taxon on gbif.org: taxon %&lt;&gt;% mutate(dwc_taxonID = paste0(&quot;https://www.gbif.org/species/&quot;, verificationKey)) 6.4.2.10 scientificName taxon %&lt;&gt;% mutate(dwc_scientificName = scientificName) 6.4.2.11 kingdom taxon %&lt;&gt;% mutate(dwc_kingdom = kingdom) 6.4.2.12 phylum taxon %&lt;&gt;% mutate(dwc_phylum = phylum) 6.4.2.13 class taxon %&lt;&gt;% mutate(dwc_class = class) 6.4.2.14 order taxon %&lt;&gt;% mutate(dwc_order = order) 6.4.2.15 family taxon %&lt;&gt;% mutate(dwc_family = family) 6.4.2.16 genus genus is part of the higher classification, which is provided by the GBIF Backbone Taxonomy. We will use that, but note that for some synonyms it might differ from the genus in the scientific name: taxon %&lt;&gt;% mutate(dwc_genus = genus) 6.4.2.17 specificEpithet taxon %&lt;&gt;% mutate(dwc_specificEpithet = canonicalName_species) 6.4.2.18 infraspecificEpithet taxon %&lt;&gt;% mutate(dwc_infraspecificEpithet = canonicalName_infraspecific) 6.4.2.19 taxonRank Inspect values: Map values as is, in UPPERCASE, so it is clearer this information comes from the GBIF Backbone Taxonomy: taxon %&lt;&gt;% mutate(dwc_taxonRank = rank) 6.4.2.20 scientificNameAuthorship taxon %&lt;&gt;% mutate(dwc_scientificNameAuthorship = authorship) 6.4.2.21 taxonRemarks Here we list the checklists that were considered for unifying information about a taxon, i.e. the checklists we selected (see 1.1) in which the taxon appeared and got through verification (see 3.2). In the case of multiple considered checklists, it is possible that not all of them are selected as a source (see 6.3) when unifying information. The datasetKeys of the considered checklists are listed in datasetKeys. Since we want the DOI instead, we will separate this information into columns, gather to rows and join with the DOI, and spread and combine again into a single column. Map to taxonRemarks: taxon %&lt;&gt;% mutate(dwc_taxonRemarks = paste( &quot;Sources considered for this taxon:&quot;, datasetDOIs )) 6.4.3 Post-processing Only keep the Darwin Core columns. Drop the dwc_ prefix. Sort on taxonID. Preview data: Save to CSV. 6.5 Distribution extension 6.5.1 Pre-processing Create a dataframe distribution from the unified distributions. 6.5.2 Term mapping Map the data to Species Distribution. Because of the scope (see 1.3) of the dataset, we can set all distributions to occurrenceStatus:present and establishmentMeans:introduced. 6.5.2.1 taxonID distribution %&lt;&gt;% mutate(dwc_taxonID = paste0(&quot;https://www.gbif.org/species/&quot;, verificationKey)) 6.5.2.2 locationID distribution %&lt;&gt;% mutate(dwc_locationID = locationId) 6.5.2.3 locality distribution %&lt;&gt;% mutate(dwc_locality = locality) 6.5.2.4 countryCode distribution %&lt;&gt;% mutate(dwc_countryCode = &quot;BE&quot;) 6.5.2.5 occurrenceStatus distribution %&lt;&gt;% mutate(dwc_occurrenceStatus = &quot;present&quot;) 6.5.2.6 establishmentMeans distribution %&lt;&gt;% mutate(dwc_establishmentMeans = &quot;introduced&quot;) 6.5.2.7 eventDate The distribution information applies to a certain date range, which we will express here as an ISO 8601 date yyyy/yyyy (startYear/endYear). How the information for startYear and endYear is extracted from the source checklists, is described in 5.3. As a result, each taxon in input_distribution has or an startYear and an endYear or no eventDate information at all. distribution %&lt;&gt;% mutate(dwc_eventDate = case_when( is.na(startYear) &amp; is.na(endYear) ~ &quot;&quot;, TRUE ~ paste(startYear, endYear, sep = &quot;/&quot;) )) Minimum year: 1201 Maximum year: 2020 6.5.2.8 source A distribution can have multiple source taxa (i.e. two verified synonyms from the same checklist). We therefore separate datasetKeys and scientificNames in a maximum of three columns and build a source (see 6.3) for each. Combine three source columns and remove NA: distribution %&lt;&gt;% mutate( dwc_source = paste(source_1, source_2, source_3, sep = &quot; | &quot;) %&gt;% str_remove_all(&quot; \\\\| NA&quot;) ) 6.5.3 Post-processing Only keep the Darwin Core columns. Drop the dwc_ prefix. Sort on taxonID. Preview data: Save to CSV. 6.6 Species profile extension Create a dataframe species_profile from the unified species profiles. 6.6.1 Term mapping Map the data to Species Profile. 6.6.1.1 taxonID species_profile %&lt;&gt;% mutate(dwc_taxonID = paste0(&quot;https://www.gbif.org/species/&quot;, verificationKey)) 6.6.1.2 isMarine species_profile %&lt;&gt;% mutate(dwc_isMarine = marine) 6.6.1.3 isFreshwater species_profile %&lt;&gt;% mutate(dwc_isFreshwater = freshwater) 6.6.1.4 isTerrestrial species_profile %&lt;&gt;% mutate(dwc_isTerrestrial = terrestrial) 6.6.1.5 isInvasive The source checklists currently do not include information on the invasive nature of the taxa. We plan to add that information in an update of the dataset. species_profile %&lt;&gt;% mutate(dwc_isInvasive = &quot;&quot;) 6.6.1.6 habitat ISSG also used the field habitat, in which we will summarize the information from isMarine, isFreshwater and isTerrestrial. Map habitat: species_profile %&lt;&gt;% mutate(dwc_habitat = case_when( marine == &quot;FALSE&quot; &amp; freshwater == &quot;FALSE&quot; &amp; terrestrial == &quot;TRUE&quot; ~ &quot;terrestrial&quot;, marine == &quot;FALSE&quot; &amp; freshwater == &quot;TRUE&quot; &amp; terrestrial == &quot;FALSE&quot; ~ &quot;freshwater&quot;, marine == &quot;FALSE&quot; &amp; freshwater == &quot;TRUE&quot; &amp; terrestrial == &quot;TRUE&quot; ~ &quot;freshwater|terrestrial&quot;, marine == &quot;TRUE&quot; &amp; freshwater == &quot;FALSE&quot; &amp; terrestrial == &quot;FALSE&quot; ~ &quot;marine&quot;, marine == &quot;TRUE&quot; &amp; freshwater == &quot;FALSE&quot; &amp; terrestrial == &quot;TRUE&quot; ~ &quot;marine|terrestrial&quot;, marine == &quot;TRUE&quot; &amp; freshwater == &quot;TRUE&quot; &amp; terrestrial == &quot;FALSE&quot; ~ &quot;marine|freshwater&quot;, marine == &quot;TRUE&quot; &amp; freshwater == &quot;TRUE&quot; &amp; terrestrial == &quot;TRUE&quot; ~ &quot;marine|freshwater|terrestrial&quot; )) Show mapping: 6.6.1.7 source See 6.3: species_profile %&lt;&gt;% add_source_citation( new_column = &quot;dwc_source&quot;, dataset_info = checklists ) 6.6.2 Post-processing Only keep the Darwin Core columns. Drop the dwc_ prefix. Sort on taxonID. Preview data: Save to CSV. 6.7 Description extension 6.7.1 Pre-processing Create a dataframe description from the unified descriptions. 6.7.2 Term mapping Map the data to Taxon Description. 6.7.2.1 taxonID description %&lt;&gt;% mutate(dwc_taxonID = paste0(&quot;https://www.gbif.org/species/&quot;, verificationKey)) 6.7.2.2 description description %&lt;&gt;% mutate(dwc_description = description) 6.7.2.3 type description %&lt;&gt;% mutate(dwc_type = type) 6.7.2.4 language description %&lt;&gt;% mutate(dwc_language = &quot;en&quot;) 6.7.2.5 source See 6.3: description %&lt;&gt;% add_source_citation( new_column = &quot;dwc_source&quot;, dataset_info = checklists ) 6.7.3 Post-processing Only keep the Darwin Core columns. Drop the dwc_ prefix. Sort on taxonID. Preview data: Save to CSV. "],["7_griis_mapping.html", "7 GRIIS mapping 7.1 Read Darwin Core data 7.2 GRIIS format 7.3 Post-processing", " 7 GRIIS mapping In this chapter we export the unified information to an Excel template that can be used by the Global Register of Introduced and Invasive Species (GRIIS). 7.1 Read Darwin Core data dwc_taxon &lt;- read_csv(here(&quot;data&quot;, &quot;processed&quot;, &quot;taxon.csv&quot;)) dwc_distribution &lt;- read_csv(here(&quot;data&quot;, &quot;processed&quot;, &quot;distribution.csv&quot;)) dwc_speciesprofile &lt;- read_csv(here(&quot;data&quot;, &quot;processed&quot;, &quot;speciesprofile.csv&quot;)) Select only national distributions 7.2 GRIIS format 7.2.1 Pre-processing Check if the taxon core, distribution extension and species profile extension contain only one row per taxonID. ## [1] TRUE ## [1] TRUE ## [1] TRUE Join the 3 files into one dataframe griis. 7.2.2 Term mapping 7.2.2.1 taxonID griis %&lt;&gt;% mutate(griis_taxonID = taxonID) 7.2.2.2 countryCode griis %&lt;&gt;% mutate(griis_countryCode = countryCode) 7.2.2.3 island griis %&lt;&gt;% mutate(griis_island = &quot;&quot;) 7.2.2.4 scientificName griis %&lt;&gt;% mutate(griis_scientificName = scientificName) 7.2.2.5 acceptedNameUsage griis %&lt;&gt;% mutate(griis_acceptedNameUsage = scientificName) 7.2.2.6 taxonRank griis %&lt;&gt;% mutate(griis_taxonRank = taxonRank) 7.2.2.7 taxonomicStatus # From TriAS perspective, all taxa are considered accepted griis %&lt;&gt;% mutate(griis_taxonomicStatus = &quot;ACCEPTED&quot;) 7.2.2.8 kingdom griis %&lt;&gt;% mutate(griis_kingdom = kingdom) 7.2.2.9 phylum griis %&lt;&gt;% mutate(griis_phylum = phylum) 7.2.2.10 class griis %&lt;&gt;% mutate(griis_class = class) 7.2.2.11 order griis %&lt;&gt;% mutate(griis_order = order) 7.2.2.12 family griis %&lt;&gt;% mutate(griis_family = family) 7.2.2.13 habitat griis %&lt;&gt;% mutate(griis_habitat = habitat) 7.2.2.14 occurrenceStatus griis %&lt;&gt;% mutate(griis_occurrenceStatus = occurrenceStatus) 7.2.2.15 establishmentMeans griis %&lt;&gt;% mutate(griis_establishmentMeans = recode(establishmentMeans, &quot;introduced&quot; = &quot;alien&quot;, .default = &quot;&quot;, .missing = &quot;&quot; )) 7.2.2.16 isInvasive griis %&lt;&gt;% mutate(griis_isInvasive = case_when( is.na(isInvasive) ~ &quot;Null&quot; )) 7.2.3 eventDate griis %&lt;&gt;% mutate(griis_eventDate = eventDate) 7.3 Post-processing Only keep the GRIIS columns. Drop the griis_ prefix. Sort on scientificName (the default for GRIIS lists). Preview data: Save to Excel. "],["8_get_synonyms.html", "8 Get synonyms of all accepted taxa 8.1 Get unified taxa 8.2 Find synonyms", " 8 Get synonyms of all accepted taxa In this chapter we retrieve all synonyms of the taxa in the unified checklist. Together with the accepted names, such a list allows to search for non-native scientific names in e.g. occurrence databases. 8.1 Get unified taxa Read data/interim/taxa_unified.csv. Define columns of interest. Select/rename columns of interest. 8.2 Find synonyms Retrieve all synonyms (from the GBIF Backbone Taxonomy) of the taxa in our list. Synonym taxa won’t return results, but are fine to leave in the list. Note: this step can take few minutes. Select columns of interest in synonyms. Merge input taxa with their synonyms. Save as CSV. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
